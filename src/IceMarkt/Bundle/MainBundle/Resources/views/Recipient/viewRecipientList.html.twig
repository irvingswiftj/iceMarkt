{% extends '::base.html.twig' %}

{% block title %}Mail Recipients{% endblock %}

{% block pagination %}
    {% if totalPages > 1 %}
        <ul class="pagination">
            <li
                    {% if currentPageNumber == 1 %}
                class="disabled"
                    {% endif %}>
                <a
                        {% if currentPageNumber > 1 %}
                            href="{{ path('view_recipient_list_page', {'pageNumber': 1}) }}"
                        {% endif %}
                        >&laquo;
                </a>
            </li>
            {% for pageNumber in (currentPageNumber-3)..(currentPageNumber+8) %}
                {% if pageNumber > 0 and pageNumber <= totalPages %}
                    <li
                            {% if pageNumber == currentPageNumber %}
                                class="active"
                            {% endif %} >
                        <a
                                href="{{ path('view_recipient_list_page', {'pageNumber': pageNumber}) }}"
                                >{{ pageNumber }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
            <li
                    {% if currentPageNumber >= totalPages %}
                        class="disabled"
                    {% endif %}
                    >
                <a
                        href="{{ path('view_recipient_list_page', {'pageNumber': totalPages}) }}"
                        >&raquo;
                </a>
            </li>
        </ul>
    {% endif %}
{% endblock %}

{% block body %}
    <h1>View Recipients</h1>

    {{ block('pagination') }}
    <div class="table-responsive">
        <table class="table table-striped table-hover table-condensed">
            <thead>
                <tr>
                    <td>Email</td>
                    <td>Last Name</td>
                    <td>First Name</td>
                </tr>
            </thead>
            <tbody>
                {% for recipient in recipients %}
                <tr>
                    <td>{{ recipient.emailAddress }}</td>
                    <td>{{ recipient.lastName }}</td>
                    <td>{{ recipient.firstName }}</td>
                    <td><a href="{{ path('remove_recipient', {'email' : recipient.emailAddress}) }}">Delete</a></td>
                </tr>
                {%  endfor %}
            </tbody>
        </table>
    </div>
    {{ block('pagination') }}
{% endblock %}